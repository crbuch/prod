<!DOCTYPE html>
<html>
<head>
</head>
<body>
    <script>
        const target = 'http://localhost:3000/api/oil-price';
        const targetSource = 'https://markets.businessinsider.com/commodities/oil-price?type=wti'
        //fetch(target)
        //    .then(response => response.text())
        //    .then(html => {
        //        const parser = new DOMParser();
        //        const doc = parser.parseFromString(html, 'text/html');
        //        const wti = doc.querySelector('.price-section__current-value').textContent;
        //        console.log('wti :>> ', wti);
        //        
        //    })
        //    .catch(error => console.error('Error fetching data:', error));
            fetch(`https://api.allorigins.win/get?url=${encodeURIComponent('https://markets.businessinsider.com/commodities/oil-price?type=wti')}`)
                    .then(response => {
                        console.log('reponse :>> ', response);

                      if (response.ok) return response.json()
                      throw new Error('Network response was not ok.')

                    })
                    .then(data => {
                        console.log('data :>> ', data);
                        const parser = new DOMParser();
                        const doc = parser.parseFromString(data.contents, 'text/html');
                        const wti = doc.querySelector('.price-section__current-value').textContent;
                        console.log('wti:', wti);
                    });
    </script>
</body>
</html>
